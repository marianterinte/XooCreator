/* Container */
.builder{
	--headerH: 44px;
	--carouselH: 84px;
	--actionH: 72px;
	--gap: 8px;
	--used: calc(var(--headerH) + var(--actionH) + (2 * var(--carouselH)) + (4 * var(--gap)));
	--contentH: calc(100dvh - var(--used));
	display:grid;
	gap: var(--gap);
	width:100vw;
	height:100dvh;
	margin:0;
	padding:0;
	grid-template-rows: var(--headerH) auto auto auto auto; /* header, top carousel, top preview, bottom preview, bottom carousel */
	overflow:hidden;
}
.page-header{display:flex;align-items:center;justify-content:flex-start;padding:6px 8px}
.btn-back{appearance:none;border:none;background:#f3f4f6;border-radius:10px;padding:8px 12px;font-size:.95rem;cursor:pointer}
.btn-back:active{transform:translateY(1px)}
.page-header h1{margin:0;text-align:center;font-size:1.05rem}

/* Panels */
.panel{display:grid;gap: var(--gap)}
.panel-top{min-height:0}
.panel-bottom{min-height:0}
.section-header h2{margin:0;font-size:1rem}

/* (Legacy chips removed in this iteration, keep styles in case we want them back) */
/* .bp-slots{display:flex;gap:8px;overflow:auto;padding:4px 2px}
.bp-chip{flex:0 0 auto;min-height:36px;min-width:56px;padding:8px 12px;border:1px solid #ddd;border-radius:999px;background:#fff;cursor:pointer}
.bp-chip.selected{border-color:#4F46E5;box-shadow:0 0 0 3px rgba(79,70,229,.12)} */

/* Media preview panels */
.media-row{display:grid;grid-template-columns:1fr;align-items:center;gap:8px}
.preview{position:relative;margin:0;display:block;height:calc(var(--contentH) / 2);overflow:hidden;touch-action:pan-y}
.panel-top .preview{height:calc(var(--contentH) / 2)}
.panel-bottom .preview{height:calc(var(--contentH) / 2)}
.preview.dragging{transition:none}
.preview img{width:100vw;height:100%;object-fit:cover;display:block;user-select:none;-webkit-user-drag:none;pointer-events:none}

.preview-caption{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.5);color:#fff;font-size:.85rem;padding:4px 8px;border-radius:999px}

/* Thumb carousels */
.carousel.thumbs{display:flex;gap:8px;overflow:auto;padding:8px;height:var(--carouselH);justify-content:center;align-items:center}
.carousel.thumbs::before,
.carousel.thumbs::after{content:"";flex:1 0 0;pointer-events:none}
.carousel.thumbs::-webkit-scrollbar{height:6px}
.thumb{flex:0 0 auto;border:none;background:transparent;padding:0;cursor:pointer;position:relative}
.thumb img{width:68px;height:68px;object-fit:cover;border-radius:10px;border:1px solid #ddd;background:#fff}
.thumb.active img{outline:2px solid #4F46E5;box-shadow:0 0 0 3px rgba(79,70,229,.12)}

.hint{margin:6px 0 0 0;color:#666;font-size:.85rem}

/* Action bar */
.action-bar{position:fixed;left:0;right:0;bottom:0;padding:8px 8px calc(8px + env(safe-area-inset-bottom));background:linear-gradient(180deg, rgba(255,255,255,0), #fff 30%)}
.btn-generate{width:min(640px, 92vw);min-height:48px;border:none;border-radius:12px;background:#4F46E5;color:#fff;font-size:1rem;cursor:pointer;display:block;margin:0 auto}
.btn-generate:hover{background:#4338CA}

/* Larger screens keep full-bleed images but slightly bigger thumbs */
@media (min-width: 768px){
	.thumb img{width:80px;height:80px}
}

/* Modal */
.confirm-modal{border:none;border-radius:12px;padding:16px 16px 12px;max-width:420px;width:calc(100% - 32px);box-shadow:0 10px 30px rgba(0,0,0,.2)}
.confirm-modal::backdrop{background:rgba(0,0,0,.45)}
.confirm-modal h3{margin:0 0 8px 0;font-size:1.05rem}
.confirm-modal .summary{max-height:200px;overflow:auto;margin:8px 0}
.confirm-modal ul{margin:0;padding-left:18px}
.confirm-modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.btn.primary{background:#4F46E5;color:white;border:none;border-radius:10px;padding:8px 12px}
.btn.secondary{background:#f3f4f6;color:#111;border:none;border-radius:10px;padding:8px 12px}
