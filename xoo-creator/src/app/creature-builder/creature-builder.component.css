/* Container */
.builder{
	--headerH: 44px;
	--carouselH: 84px;
	--actionH: 72px;
	--gap: 8px;
	--used: calc(var(--headerH) + var(--actionH) + (2 * var(--carouselH)) + (4 * var(--gap)));
	--contentH: calc(100dvh - var(--used));
	display:grid;
	gap: var(--gap);
	width:100vw;
	height:100dvh;
	margin:0;
	padding:0;
	grid-template-rows: var(--headerH) auto auto auto auto; /* header, top carousel, top preview, bottom preview, bottom carousel */
	overflow:hidden;
}
.page-header{display:flex;align-items:center;justify-content:space-between;padding:6px 8px}
.spacer{flex:1}
.btn-icon{appearance:none;border:none;background:#f3f4f6;border-radius:999px;width:36px;height:36px;display:grid;place-items:center;font-size:1rem;cursor:pointer}
.btn-icon:active{transform:translateY(1px)}
.btn-icon.back{justify-self:flex-start}
.btn-icon.help{justify-self:flex-end}
.page-header h1{margin:0;text-align:center;font-size:1.05rem}

/* Panels */
.panel{display:grid;gap: var(--gap)}
.panel-top{min-height:0}
.panel-bottom{min-height:0}
.section-header h2{margin:0;font-size:1rem}

/* (Legacy chips removed in this iteration, keep styles in case we want them back) */
/* .bp-slots{display:flex;gap:8px;overflow:auto;padding:4px 2px}
.bp-chip{flex:0 0 auto;min-height:36px;min-width:56px;padding:8px 12px;border:1px solid #ddd;border-radius:999px;background:#fff;cursor:pointer}
.bp-chip.selected{border-color:#4F46E5;box-shadow:0 0 0 3px rgba(79,70,229,.12)} */

/* Media preview panels */
.media-row{display:grid;grid-template-columns:1fr;align-items:center;gap:8px}
.preview{position:relative;margin:0;display:block;height:calc(var(--contentH) / 2);overflow:hidden;touch-action:pan-y}
.panel-top .preview{height:calc(var(--contentH) / 2)}
.panel-bottom .preview{height:calc(var(--contentH) / 2)}
.preview.dragging{transition:none}
.preview img{width:100vw;height:100%;object-fit:cover;display:block;user-select:none;-webkit-user-drag:none;pointer-events:none}

.preview-caption{position:absolute;left:8px;bottom:8px;background:rgba(0,0,0,.5);color:#fff;font-size:.85rem;padding:4px 8px;border-radius:999px}

/* Thumb carousels */
.carousel.thumbs{display:flex;gap:8px;overflow:auto;padding:8px;height:var(--carouselH);justify-content:center;align-items:center}
.carousel.thumbs::before,
.carousel.thumbs::after{content:"";flex:1 0 0;pointer-events:none}
.carousel.thumbs::-webkit-scrollbar{height:6px}
.thumb{flex:0 0 auto;border:none;background:transparent;padding:0;cursor:pointer;position:relative}
.thumb img{width:68px;height:68px;object-fit:cover;border-radius:10px;border:1px solid #ddd;background:#fff}
.thumb.active img{outline:2px solid #4F46E5;box-shadow:0 0 0 3px rgba(79,70,229,.12)}
.thumb.locked img{filter:grayscale(0.4);opacity:.7}
.badge-lock{position:absolute;right:4px;top:4px;background:rgba(0,0,0,.6);color:#fff;border-radius:8px;padding:2px 6px;font-size:.75rem}

.hint{margin:6px 0 0 0;color:#666;font-size:.85rem}

/* Action bar */
.action-bar{position:fixed;left:0;right:0;bottom:0;padding:8px 8px calc(8px + env(safe-area-inset-bottom));background:linear-gradient(180deg, rgba(255,255,255,0), #fff 30%)}
.btn-generate{width:min(640px, 92vw);min-height:48px;border:none;border-radius:12px;background:#4F46E5;color:#fff;font-size:1rem;cursor:pointer;display:block;margin:0 auto}
.btn-generate:hover{background:#4338CA}
.btn-unlock{width:min(640px, 92vw);min-height:48px;border:none;border-radius:12px;background:#059669;color:#fff;font-size:1rem;cursor:pointer;display:block;margin:0 auto}
.btn-unlock:hover{background:#047857}

/* Larger screens keep full-bleed images but slightly bigger thumbs */
@media (min-width: 768px){
	.thumb img{width:80px;height:80px}
}

/* Modal */
.confirm-modal{border:none;border-radius:16px;padding:24px;max-width:none;width:100vw;height:100dvh;box-shadow:0 20px 50px rgba(0,0,0,.28);display:flex;flex-direction:column}
.confirm-modal:not([open]){display:none !important}
.confirm-modal[open]{animation: modal-pop-in 220ms cubic-bezier(.2,.7,.3,1) both}
.confirm-modal::backdrop{background:rgba(0,0,0,.45);animation: backdrop-fade-in 220ms ease-out both}
.confirm-modal h3{margin:0 0 12px 0;font-size:1.35rem}
.confirm-modal .summary{flex:1 1 auto;min-height:0;overflow:auto;margin:12px 0;font-size:1.05rem;line-height:1.5}
.confirm-modal ul{margin:0;padding-left:18px}
.confirm-modal ol{margin:0;padding-left:18px}
.confirm-modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.btn.primary{background:#4F46E5;color:white;border:none;border-radius:10px;padding:8px 12px}
.btn.secondary{background:#f3f4f6;color:#111;border:none;border-radius:10px;padding:8px 12px}

@keyframes modal-pop-in{
	from{opacity:0;transform:translateY(8px) scale(.96)}
	to{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes backdrop-fade-in{
	from{opacity:0}
	to{opacity:1}
}
